<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>중국어 단어장</title>
    
    <!-- GitHub Pages 호환성 메타 태그 -->
    <meta name="theme-color" content="#3b82f6">
    <meta name="description" content="중국어 단어장 웹 애플리케이션">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a'
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- 외부 라이브러리 -->
    <script src="https://unpkg.com/feather-icons"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- 커스텀 CSS -->
    <link rel="stylesheet" href="static/css/styles.css">
</head>
<body class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50">
    <div id="app" class="container mx-auto px-4 py-8 pb-24">
        <div class="max-w-6xl mx-auto">
            <!-- 헤더 섹션 -->
            <!-- 단어 추가 카드 -->
            <div class="glass-effect rounded-2xl shadow-xl p-8 mb-8" data-aos="fade-up" data-aos-delay="100">
                <div class="flex flex-col md:flex-row gap-4">
                    <div class="flex-1">
                        <label for="chineseInput" class="block text-sm font-medium text-gray-700 mb-2">
                            중국어 단어
                        </label>
                        <input 
                            type="text" 
                            id="chineseInput" 
                            placeholder="예: 你好, 谢谢, 再见" 
                            class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-300 text-lg"
                        >
                    </div>
                    <div class="flex items-end">
                        <button 
                            id="addBtn" 
                            class="bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white px-8 py-3 rounded-xl transition-all duration-300 flex items-center justify-center font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-1"
                        >
                            <i data-feather="plus" class="w-5 h-5 mr-2"></i> 
                            단어 추가
                        </button>
                    </div>
                </div>
            </div>

            <!-- 단어 목록 -->
            <div id="wordTableContainer" class="glass-effect rounded-2xl shadow-xl overflow-hidden" data-aos="fade-up" data-aos-delay="200">
                <!-- 고정 헤더 -->
                <div class="overflow-x-auto">
                    <table class="min-w-full">
                        <thead class="bg-gradient-to-r from-primary-500 to-primary-600 text-white sticky top-0 z-10">
                            <tr>
                                <th class="px-4 py-4 text-center text-sm font-semibold uppercase tracking-wider w-1/5">
                                    중국어
                                </th>
                                <th class="px-4 py-4 text-center text-sm font-semibold uppercase tracking-wider w-1/5">
                                    병음
                                </th>
                                <th class="px-4 py-4 text-center text-sm font-semibold uppercase tracking-wider w-2/5">
                                    한국어 뜻
                                </th>
                                <th class="px-4 py-4 text-center text-sm font-semibold uppercase tracking-wider w-1/6">작업</th>
                            </tr>
                        </thead>
                    </table>
                </div>
                
                <!-- 스크롤 가능한 본문: 테이블 높이를 뷰포트에 맞춰 제한하여 버튼/푸터가 항상 보이게 함 -->
                <div class="overflow-y-auto overflow-x-auto table-scroll">
                    <table class="min-w-full">
                        <tbody id="wordTableBody" class="bg-white">
                            <!-- 단어들이 여기에 추가됩니다 -->
                        </tbody>
                    </table>
                </div>
                
                <!-- 빈 상태 -->
                <div id="emptyState" class="p-16 text-center bg-white">
                    <div class="max-w-sm mx-auto">
                        <div class="w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full flex items-center justify-center">
                            <i data-feather="book-open" class="w-12 h-12 text-gray-400"></i>
                        </div>
                        <h3 class="text-lg font-medium text-gray-900 mb-2">단어장이 비어있습니다</h3>
                        <p class="text-gray-500">첫 번째 중국어 단어를 추가해보세요!</p>
                    </div>
                </div>
            </div>
            
            <!-- 컨트롤 버튼 -->
            <div id="controls" class="mt-6 hidden flex flex-wrap justify-center gap-4" data-aos="fade-up" data-aos-delay="300">
                <!-- <button 
                    id="retranslateAllBtn" 
                    class="bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white px-6 py-3 rounded-xl transition-all duration-300 flex items-center justify-center font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-1"
                    onclick="wordbook.retranslateAll()"
                >
                    <i data-feather="refresh-cw" class="w-5 h-5 mr-2"></i> 
                    전체 재번역
                </button> -->
                
                <button 
                    id="exportBtn" 
                    class="bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-6 py-3 rounded-xl transition-all duration-300 flex items-center justify-center font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-1"
                    onclick="wordbook && wordbook.exportData()"
                >
                    <i data-feather="download" class="w-5 h-5 mr-2"></i> 
                    복사하기
                </button>
                
                <!-- <label class="bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-6 py-3 rounded-xl transition-all duration-300 flex items-center justify-center font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-1 cursor-pointer">
                    <i data-feather="upload" class="w-5 h-5 mr-2"></i> 
                    가져오기
                    <input type="file" accept=".json" class="hidden" onchange="if(this.files.length) wordbook.importData(this.files[0])">
                </label> -->
                
                <button 
                    id="clearAllBtn" 
                    class="bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-6 py-3 rounded-xl transition-all duration-300 flex items-center justify-center font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-1"
                >
                    <i data-feather="trash-2" class="w-5 h-5 mr-2"></i> 
                    전체 삭제
                </button>
            </div>
        </div>
    </div>

    <!-- 개발 버전 배지 (우측 상단) -->
    <div id="devBadge" class="fixed top-4 right-4 bg-yellow-400 text-black px-3 py-1 rounded-full text-sm font-medium shadow-lg z-50">
        수정일자: 2025.10.27
    </div>

    <!-- 사이트 푸터 (화면 하단에 고정) -->
    <footer id="siteFooter" class="fixed bottom-0 left-0 right-0 text-center text-sm text-gray-500 py-3 bg-white/90 backdrop-blur-md shadow-md z-50">
        ⓒ 2025.binwon-Song All Rights Reserved. (>_<)
    </footer>

    <!-- 수정 모달 -->
    <div id="editModal" class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center hidden z-50 p-4">
        <div class="glass-effect rounded-2xl p-8 w-full max-w-lg transform transition-all duration-300 scale-95">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-gray-900">단어 수정</h3>
                <button id="closeModalBtn" class="p-2 hover:bg-gray-100 rounded-full transition-colors duration-200">
                    <i data-feather="x" class="w-6 h-6 text-gray-500"></i>
                </button>
            </div>
            
            <div class="space-y-6">
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">중국어</label>
                    <input 
                        type="text" 
                        id="editChinese" 
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-300"
                    >
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">발음(병음) 및 뜻 — 여러 항목 추가 가능</label>
                    <div id="editPinyinList" class="space-y-3">
                        <!-- 동적으로 발음+뜻 항목이 추가됩니다 -->
                    </div>
                    <div class="mt-2">
                        <button id="addPinyinBtn" type="button" class="px-3 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200">발음 추가</button>
                        <p class="text-xs text-gray-500 mt-2">각 항목은 병음과 해당 병음의 한국어 뜻(여러 줄 또는 쉼표 구분)을 가질 수 있습니다.</p>
                    </div>
                </div>
            </div>
            
            <div class="mt-8 flex justify-end space-x-4">
                <button 
                    id="cancelEditBtn" 
                    class="px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all duration-300 font-medium"
                >
                    취소
                </button>
                <button 
                    id="saveEditBtn" 
                    class="px-6 py-3 bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white rounded-xl transition-all duration-300 font-medium shadow-lg"
                >
                    저장
                </button>
            </div>
        </div>
    </div>

    <!-- 커스텀 JavaScript -->
    <script>
        // 파일 로딩 에러 처리
        window.addEventListener('error', function(e) {
            if (e.target.tagName === 'SCRIPT') {
                console.error('스크립트 로딩 실패:', e.target.src);
                document.body.innerHTML += '<div style="position:fixed;top:10px;left:10px;background:red;color:white;padding:10px;z-index:9999;">스크립트 로딩 실패: ' + e.target.src + '</div>';
            }
        }, true);
        
        // 기본 로딩 표시
        console.log('페이지 로딩 시작...');
    </script>
    
    <script src="static/js/ui/ui-utils.js" onerror="console.error('ui-utils.js 로딩 실패')"></script>
    <script src="static/js/services/translation-service.js" onerror="console.error('translation-service.js 로딩 실패')"></script>
    <script src="static/js/app/main.js" onerror="console.error('main.js 로딩 실패')"></script>
    
    <script>
        // 스크립트 로딩 완료 후 초기화
        window.addEventListener('DOMContentLoaded', function() {
            console.log('DOM 로딩 완료');
            
            // Feather 아이콘 초기화
            if (typeof feather !== 'undefined') {
                feather.replace();
            }
            
            // AOS 애니메이션 초기화
            if (typeof AOS !== 'undefined') {
                AOS.init({
                    duration: 800,
                    once: true,
                    offset: 100
                });
            }
            
            // 앱 초기화 확인
            setTimeout(() => {
                if (typeof window.wordbook === 'undefined') {
                    document.body.innerHTML += '<div style="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:orange;color:white;padding:20px;z-index:9999;border-radius:10px;">앱 초기화 실패 - 스크립트 파일을 확인해주세요</div>';
                }
            }, 2000);
        });
    </script>
</body>
</html>
